<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso Completo PHP y MySQL: De Básico a Avanzado</title>
    <style>
        :root {
            --bg-body: #1e1e1e;
            --bg-card: #252526;
            --text-main: #e0e0e0;
            --accent: #4caf50;
            --code-bg: #101010;
            --border: #333;
            --tag: #569cd6;
            --attr: #9cdcfe;
            --str: #ce9178;
            --comment: #6a9955;
            --php-tag: #c586c0;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container { max-width: 1000px; margin: 0 auto; }
        
        h1 { text-align: center; color: var(--accent); border-bottom: 2px solid var(--accent); padding-bottom: 10px; }
        h2 { color: #fff; margin-top: 50px; background: #333; padding: 10px; border-radius: 5px; border-left: 5px solid var(--accent); }
        h3 { color: var(--attr); margin-top: 25px; font-family: monospace; font-size: 1.2em; }
        
        .desc { margin-bottom: 15px; color: #bbb; }

        /* Contenedor de código */
        .file-container {
            background-color: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .file-header {
            background-color: #333;
            padding: 8px 15px;
            font-family: monospace;
            font-weight: bold;
            color: var(--accent);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
        }

        pre {
            background-color: var(--code-bg);
            margin: 0;
            padding: 15px;
            overflow-x: auto;
            font-family: 'Consolas', monospace;
            font-size: 0.9em;
            color: #d4d4d4;
        }

        .explanation {
            background: rgba(76, 175, 80, 0.1);
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            border-left: 4px solid var(--accent);
        }

        ul { margin: 0; padding-left: 20px; }
        li { margin-bottom: 5px; }

        /* Botón ir arriba */
        .toc { background: var(--bg-card); padding: 15px; border-radius: 8px; margin-bottom: 30px; }
        .toc a { color: var(--attr); text-decoration: none; display: block; margin: 5px 0; }
        .toc a:hover { text-decoration: underline; }
    </style>
</head>
<body>

<div class="container">
    <h1>Guía PHP: Acceso a Datos (CRUD)</h1>
    
    <div class="toc">
        <strong>Índice de Contenidos (De menos a más):</strong>
        <a href="#nivel1">NIVEL 1: Configuración Básica</a>
        <a href="#nivel2">NIVEL 2: Listar Datos (Lectura simple)</a>
        <a href="#nivel3">NIVEL 3: Buscar y Ver Detalles (Lectura específica)</a>
        <a href="#nivel4">NIVEL 4: Insertar Datos (Crear)</a>
        <a href="#nivel5">NIVEL 5: Eliminar Datos (Borrar)</a>
        <a href="#nivel6">NIVEL 6: Modificar Datos (Editar)</a>
    </div>

    <h2 id="nivel1">NIVEL 1: Configuración Básica</h2>
    <p class="desc">Antes de hacer nada, necesitamos definir las credenciales. Este archivo se incluirá en todos los demás.</p>

    <div class="file-container">
        <div class="file-header">Archivo: config3.php</div>
        <pre>&lt;?php
$SERVIDOR = "localhost";//SERVIDOR
$USUARIO = "paco";                //USUARIO
$CLAVE = "alumno";                //CONTRASEÑA
$DATABASE = "jardineria";        //BASE DE DATOS
?&gt;</pre>
    </div>
    <div class="explanation">
        <strong>Análisis:</strong>
        Simplemente define 4 variables. No conecta todavía, solo guarda la información. Esto es buena práctica para no escribir la contraseña en 10 archivos diferentes.
    </div>

    <h2 id="nivel2">NIVEL 2: Listar Datos (Lectura)</h2>
    <p class="desc">Lo más sencillo es leer todo lo que hay en una tabla. Aquí vemos dos formas de hacerlo según tus ejercicios.</p>

    <h3>Forma A: Array estándar</h3>
    <div class="file-container">
        <div class="file-header">Archivo: listado2.php</div>
        <pre>&lt;html&gt;
	&lt;head&gt;&lt;/head&gt;
	&lt;body&gt;
	&lt;h1&gt;Ejemplo para conectar con base de datos&lt;/h1&gt;
	
	&lt;?php
	
	// Conectar con la base de datos
      $cnx = mysqli_connect('localhost','paco','alumno','jardineria') or die(mysqli_error($cnx));
   
      // Crear el código de la sentencia SQL
      $consulta = "SELECT codigoOficina, ciudad FROM Oficinas"; 
      
      // Ejecutar la consulta
      $resultado = mysqli_query($cnx,$consulta) or die(mysqli_error($cnx));
      
      // Comprobar que devuelve filas
      if (mysqli_num_rows($resultado)&gt;0){
      		echo "Filas: ".mysqli_num_rows($resultado);
      		
      		// Versión con list
      		/* while (list($codOfi,$ciudadOfi) = mysqli_fetch_array($resultado)){
      			echo "CODIGO: ".$codOfi."&lt;br&gt;";
      			echo "CIUDAD: ".$ciudadOfi."&lt;br&gt;";
      			echo "---------------------------&lt;br&gt;";
      		}*/
      		
      		// versión sin list
      		while ($ciudades = mysqli_fetch_array($resultado)){
      			echo "CODIGO: ".$ciudades['codigoOficina']."&lt;br&gt;";
      			echo "CIUDAD: ".$ciudades['ciudad']."&lt;br&gt;";
      			echo "---------------------------&lt;br&gt;";
      		}
      }
      else {
      
      		echo "No se ha obtenido ninguna fila";
      }
	
	// liberrar memoria
	mysqli_free_result($resultado);
	mysqli_close($cnx);	

	?&gt;

	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <h3>Forma B: Usando la función list()</h3>
    <p class="desc">Esta versión es ligeramente más avanzada porque muestra los datos en una tabla y crea enlaces para otras acciones.</p>
    <div class="file-container">
        <div class="file-header">Archivo: listado3.php</div>
        <pre>&lt;html&gt;
	&lt;head&gt;&lt;/head&gt;
	&lt;body&gt;
	&lt;h1&gt;Ejemplo para conectar con base de datos&lt;/h1&gt;
	
	&lt;?php
	
	// Conectar con la base de datos
      $cnx = mysqli_connect('localhost','paco','alumno','jardineria') or die(mysqli_error($cnx));
   
      // Crear el código de la sentencia SQL
      $consulta = "SELECT codigoOficina, ciudad FROM Oficinas"; 
      
      // Ejecutar la consulta
      $resultado = mysqli_query($cnx,$consulta) or die(mysqli_error($cnx));
      
      // Comprobar que devuelve filas
      if (mysqli_num_rows($resultado)&gt;0){
      		echo "Filas: ".mysqli_num_rows($resultado);
      		
      		// Creamos la cabecera de la tabla
      		echo "&lt;table border='1'&gt;";
      		echo "&lt;tr&gt;";
      		echo "&lt;th&gt;CODIGO&lt;/th&gt;";
      		echo "&lt;th&gt;CIUDAD&lt;/th&gt;";
      		echo "&lt;th&gt;VER&lt;/th&gt;";
      		echo "&lt;th&gt;ELIMINAR&lt;/th&gt;";
      		echo "&lt;/tr&gt;";
     		
      		// Versión con list
      		while (list($codOfi,$ciudadOfi) = mysqli_fetch_array($resultado)){
      			echo "&lt;tr&gt;";
      			echo "&lt;td&gt;".$codOfi."&lt;/td&gt;";
      			echo "&lt;td&gt;".$ciudadOfi."&lt;/td&gt;";
      			echo "&lt;td&gt;&lt;a href='ver3.php?codOficina=$codOfi'&gt;Detalles&lt;/a&gt;&lt;/td&gt;";
      			echo "&lt;td&gt;&lt;a href='eliminar3.php?codOficina=$codOfi'&gt;Borrar&lt;/a&gt;&lt;/td&gt;";
      			echo "&lt;/tr&gt;";
      		}
      		
      		// Cerramos la tabla
      		echo "&lt;/table&gt;";
      		

      }
      else {
      
      		echo "No se ha obtenido ninguna fila";
      }
	
	// liberrar memoria
	mysqli_free_result($resultado);
	mysqli_close($cnx);	

	?&gt;

	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>
    <div class="explanation">
        <strong>Concepto Nuevo:</strong> <code>while (list($var1, $var2) = mysqli_fetch_array(...))</code>
        <ul>
            <li><code>mysqli_fetch_array</code> devuelve la fila actual.</li>
            <li><code>list()</code> "desempaqueta" esa fila y asigna la columna 0 a <code>$var1</code> y la columna 1 a <code>$var2</code> automáticamente. Es útil para código más corto.</li>
            <li>Observa cómo se generan enlaces dinámicos: <code>href='ver3.php?codOficina=$codOfi'</code>.</li>
        </ul>
    </div>

    <h2 id="nivel3">NIVEL 3: Buscar y Ver Detalles</h2>
    <p class="desc">Aquí aprendemos a pasar información de una página a otra usando <strong>GET</strong>.</p>

    <h3>El Formulario de Búsqueda</h3>
    <div class="file-container">
        <div class="file-header">Archivo: buscarOficina.html</div>
        <pre>&lt;html&gt;
	&lt;head&gt;
		&lt;meta charset="UTF-8"/&gt;
	&lt;/head&gt;
	&lt;body&gt;
	&lt;h1&gt;BUSCAR OFICINA&lt;/h1&gt;
	
	&lt;!-- Formulario Búsqueda por codigo Oficina PK --&gt;
	&lt;fieldset&gt;
	&lt;form action="ver3.php" method="GET"&gt;
		Introduce código de Oficina :
		&lt;input type="text" name="codOficina"/&gt;
		&lt;input type="submit" name="BUSCAR" value="Buscar por Código"/&gt;
	&lt;/form&gt;	
	&lt;/fieldset&gt;	

	&lt;!-- Formulario Búsqueda de oficinas por pais --&gt;
	
	&lt;fieldset&gt;
	&lt;form action="buscarPais3.php" method="GET"&gt;
		Introduce el nombre del país :
		&lt;input type="text" name="paisOfi"/&gt;
		&lt;input type="submit" name="BUSCAR" value="Buscar por País"/&gt;
	&lt;/form&gt;	
	&lt;/fieldset&gt;

	
	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <h3>Procesar Búsqueda (Ver detalle único)</h3>
    <div class="file-container">
        <div class="file-header">Archivo: ver3.php</div>
        <pre>&lt;html&gt;
	&lt;head&gt;&lt;/head&gt;
	&lt;body&gt;
	&lt;h1&gt;Ejemplo para ver todos los campos de una oficina&lt;/h1&gt;
	
	&lt;?php
	
	
     if (isset($_GET['codOficina'])){	
	
	// Conectar con la base de datos
      $cnx = mysqli_connect('localhost','paco','alumno','jardineria') or die(mysqli_error($cnx));
   
      // Crear el código de la sentencia SQL
      $consulta = "SELECT * FROM Oficinas WHERE codigoOficina='".$_GET['codOficina']."'"; 
      
      // Ejecutar la consulta
      $resultado = mysqli_query($cnx,$consulta) or die(mysqli_error($cnx));
      
      // Comprobar que devuelve filas
      if (mysqli_num_rows($resultado)&gt;0){  // Existe la oficina
      		$ofi = mysqli_fetch_array($resultado);
      		
      		echo "&lt;table border='1'&gt;";
      		echo "&lt;tr&gt;&lt;th&gt;CODIGO&lt;/th&gt;&lt;td&gt;".$ofi['CodigoOficina']."&lt;/td&gt;&lt;/tr&gt;";
      		echo "&lt;tr&gt;&lt;th&gt;CIUDAD&lt;/th&gt;&lt;td&gt;".$ofi['Ciudad']."&lt;/td&gt;&lt;/tr&gt;";
      		echo "&lt;tr&gt;&lt;th&gt;PAIS&lt;/th&gt;&lt;td&gt;".$ofi['Pais']."&lt;/td&gt;&lt;/tr&gt;";
      		echo "&lt;tr&gt;&lt;th&gt;REGION&lt;/th&gt;&lt;td&gt;".$ofi['Region']."&lt;/td&gt;&lt;/tr&gt;";
      		echo "&lt;tr&gt;&lt;th&gt;COD POSTAL&lt;/th&gt;&lt;td&gt;".$ofi['CodigoPostal']."&lt;/td&gt;&lt;/tr&gt;";
      		echo "&lt;tr&gt;&lt;th&gt;TELEFONO&lt;/th&gt;&lt;td&gt;".$ofi['Telefono']."&lt;/td&gt;&lt;/tr&gt;";
      		echo "&lt;tr&gt;&lt;th&gt;DIRECCION1&lt;/th&gt;&lt;td&gt;".$ofi['LineaDireccion1']."&lt;/td&gt;&lt;/tr&gt;";
      		echo "&lt;tr&gt;&lt;th&gt;DIRECCION2&lt;/th&gt;&lt;td&gt;".$ofi['LineaDireccion2']."&lt;/td&gt;&lt;/tr&gt;";
      		echo "&lt;/table&gt;";
      }
      else{
      		echo "No existe esa oficina";
      
      }
      
      
      
      
      	// liberar memoria
	mysqli_free_result($resultado);
	mysqli_close($cnx);
	
	}
	
	else {
		echo "ERROR: Debe de especificar un código de oficina";
	}	

	?&gt;

	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <h3>Procesar Búsqueda (Ver lista filtrada)</h3>
    <div class="file-container">
        <div class="file-header">Archivo: buscarPais3.php</div>
        <pre>&lt;html&gt;
	&lt;head&gt;&lt;/head&gt;
	&lt;body&gt;
	&lt;h1&gt;Listado de Oficinas por pais&lt;/h1&gt;
	
	&lt;?php
	
	if (isset($_GET['paisOfi'])){
	
		// Conectar con la base de datos
	 	include("config3.php");
	      $cnx = mysqli_connect($SERVIDOR, $USUARIO, $CLAVE, $DATABASE) or die(mysqli_error($cnx));
	   
	      // Crear el código de la sentencia SQL
	      $consulta = "SELECT codigoOficina, ciudad FROM Oficinas WHERE pais LIKE '%".$_GET['paisOfi']."%'"; 
	      
	      // Ejecutar la consulta
	      $resultado = mysqli_query($cnx,$consulta) or die(mysqli_error($cnx));
	      
	      // Comprobar que devuelve filas
	      if (mysqli_num_rows($resultado)&gt;0){
	      		echo "Filas: ".mysqli_num_rows($resultado);
	      		
	      		// Creamos la cabecera de la tabla
	      		echo "&lt;table border='1'&gt;";
	      		echo "&lt;tr&gt;";
	      		echo "&lt;th&gt;CODIGO&lt;/th&gt;";
	      		echo "&lt;th&gt;CIUDAD&lt;/th&gt;";
	      		echo "&lt;th&gt;VER&lt;/th&gt;";
	      		echo "&lt;th&gt;ELIMINAR&lt;/th&gt;";
	      		echo "&lt;/tr&gt;";
	     		
	      		// Versión con list
	      		while (list($codOfi,$ciudadOfi) = mysqli_fetch_array($resultado)){
	      			echo "&lt;tr&gt;";
	      			echo "&lt;td&gt;".$codOfi."&lt;/td&gt;";
	      			echo "&lt;td&gt;".$ciudadOfi."&lt;/td&gt;";
	      			echo "&lt;td&gt;&lt;a href='ver3.php?codOficina=$codOfi'&gt;Detalles&lt;/a&gt;&lt;/td&gt;";
	      			echo "&lt;td&gt;&lt;a href='eliminar3.php?codOficina=$codOfi'&gt;Borrar&lt;/a&gt;&lt;/td&gt;";
	      			echo "&lt;/tr&gt;";
	      		}
	      		
	      		// Cerramos la tabla
	      		echo "&lt;/table&gt;";
	      		

	      }
	      else {
	      
	      		echo "No se ha obtenido ninguna fila";
	      }
		
		// liberrar memoria
		mysqli_free_result($resultado);
		mysqli_close($cnx);	

	}
	else {
	
	     echo "ERROR: No se ha pasado un pais";
	}

	?&gt;

	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>
    <div class="explanation">
        <strong>Conceptos Nuevos:</strong>
        <ul>
            <li><code>isset($_GET['...'])</code>: Verifica si llegaron datos por la URL.</li>
            <li><code>LIKE '%...%'</code>: En SQL, permite buscar textos que contengan la palabra (no que sean exactos).</li>
        </ul>
    </div>

    <h2 id="nivel4">NIVEL 4: Insertar Datos (Crear)</h2>
    <p class="desc">Para insertar usamos formularios con método <strong>POST</strong> para enviar datos ocultos y más seguros.</p>

    <h3>El Formulario de Alta</h3>
    <div class="file-container">
        <div class="file-header">Archivo: insertarOficina.html</div>
        <pre>&lt;html&gt;
	&lt;head&gt;&lt;/head&gt;
	&lt;body&gt;
	&lt;h1&gt;FORMULARIO DE ALTA DE UNA OFICINA&lt;/h1&gt;
	&lt;form action="insertar3.php" method="POST"&gt;
		CODIGO: &lt;input type='text' name="codOfi"&gt;&lt;br&gt;
		
		CIUDAD: &lt;input type='text' name="ciudadOfi"/&gt;&lt;br&gt;
		
		PAIS: &lt;input type='text' name="paisOfi"/&gt;&lt;br&gt;
		
		REGION: &lt;input type='text' name="regionOfi"/&gt;&lt;br&gt;
		
		COD POSTAL: &lt;input type='text' name="cpOfi"/&gt;&lt;br&gt;

		TELEFONO: &lt;input type='text' name="tlfOfi"/&gt;&lt;br&gt;
		
		DIRECCION1: &lt;input type='text' name="dir1Ofi"/&gt;&lt;br&gt;

		DIRECCION2: &lt;input type='text' name="dir2Ofi"/&gt;&lt;br&gt;
		
		&lt;input type="submit" name="INSERTAR" VALUE="Insertar"/&gt;

	&lt;/form&gt;
	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <h3>Procesar Inserción</h3>
    <div class="file-container">
        <div class="file-header">Archivo: insertar3.php</div>
        <pre>&lt;html&gt;

	&lt;head&gt;&lt;/head&gt;
	
	&lt;body&gt;
	
     	&lt;?php
	     if (isset($_POST['INSERTAR'])){	
		
		include ("config3.php");
		$cnx = mysqli_connect($SERVIDOR,$USUARIO,$CLAVE,$DATABASE) or die(mysqli_error($cnx));
		
        //$campos = "codigoOfician, ciudad, pais, ...";
        $valores = "'".$_POST['codOfi']."',";
        $valores .= "'".$_POST['ciudadOfi']."',";
        $valores .= "'".$_POST['paisOfi']."',";
        $valores .= "'".$_POST['regionOfi']."',";
        $valores .= "'".$_POST['cpOfi']."',";
        $valores .= "'".$_POST['tlfOfi']."',";
        $valores .= "'".$_POST['dir1Ofi']."',";
        $valores .= "'".$_POST['dir2Ofi']."'";
        $sql = "INSERT INTO Oficinas VALUES($valores)";
        //echo $sql;
        
        $res = mysqli_query($cnx,$sql) or die(mysqli_error($cnx));
        echo "Registro insertado.&lt;br&gt;";
        mysqli_close($cnx);		
	}
	
	else {
	
		echo "ERROR: tienes que insertar desde el formulario";
	}
	?&gt;
	&lt;/body&gt;	
&lt;/html&gt;</pre>
    </div>
    <div class="explanation">
        <strong>Detalle importante:</strong> <code>$valores .= ...</code>
        <ul>
            <li>El punto (<code>.</code>) es para concatenar (unir textos).</li>
            <li>El punto y igual (<code>.=</code>) añade texto a lo que ya tenía la variable.</li>
            <li>Aquí se crea una cadena larga con todos los valores separados por comas para meterla en el SQL.</li>
        </ul>
    </div>

    <h2 id="nivel5">NIVEL 5: Eliminar Datos</h2>
    <p class="desc">La eliminación es crítica. Se suele pedir el código (PK) para borrar exactamente el registro deseado.</p>

    <h3>Formulario de Borrado</h3>
    <div class="file-container">
        <div class="file-header">Archivo: eliminarOficina.html</div>
        <pre>&lt;html&gt;
	&lt;head&gt;
		&lt;meta charset="UTF-8"/&gt;
	&lt;/head&gt;
	&lt;body&gt;
	&lt;h1&gt;ELIMINAR OFICINA&lt;/h1&gt;
	
	&lt;!-- Formulario --&gt;
	
	&lt;form action="eliminar3.php" method="GET"&gt;
		Introduce código de Oficina :
		&lt;input type="text" name="codOficina"/&gt;
		&lt;input type="submit" name="ELIMINAR" value="Eliminar"/&gt;
	&lt;/form&gt;		
	
	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <h3>Procesar Eliminación</h3>
    <div class="file-container">
        <div class="file-header">Archivo: eliminar3.php</div>
        <pre>&lt;html&gt;

	&lt;head&gt;&lt;/head&gt;
	
	&lt;body&gt;
	
     	&lt;?php
	     if (isset($_GET['codOficina'])){	
		
		include ("config3.php");
		$cnx = mysqli_connect($SERVIDOR,$USUARIO,$CLAVE,$DATABASE) or die(mysqli_error($cnx));
		// Conectar con la base de datos
	       //$cnx = mysqli_connect('localhost','paco','alumno','jardineria') or die(mysqli_error($cnx));
	   
	      // Crear el código de la sentencia SQL
	      $sentencia = "DELETE FROM Oficinas WHERE codigoOficina='".$_GET['codOficina']."'"; 
	      
	      // Ejecutar la consulta
	      $resultado = mysqli_query($cnx,$sentencia) or die(mysqli_error($cnx));
	
	      echo "Oficina eliminada: ". $_GET['codOficina'];
	      
	       mysqli_close($cnx);
	       }

	?&gt;
	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <h2 id="nivel6">NIVEL 6: Modificar Datos (Complejo)</h2>
    <p class="desc">Este es el proceso más largo. Requiere 3 pasos: (1) Pedir código -> (2) Leer datos y rellenar formulario -> (3) Guardar cambios.</p>

    <h3>Paso 1: Pedir qué editar</h3>
    <div class="file-container">
        <div class="file-header">Archivo: editar3.html</div>
        <pre>&lt;html&gt;

	&lt;head&gt;&lt;/head&gt;
	
	
	&lt;body&gt;
	&lt;h1&gt;MODIFICAR LOS DATOS DE UNA OFICINA&lt;/h1&gt;
	
	&lt;form action="editar3.php" method='GET'&gt;
		CODIGO OFICINA: &lt;input type="text" name="codOfi"/&gt;
		&lt;input type="submit" name="EDITAR" value="Editar"/&gt;
	
	&lt;/form&gt;


	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>

    <h3>Paso 2: Mostrar formulario relleno</h3>
    <div class="file-container">
        <div class="file-header">Archivo: editar3.php</div>
        <pre>&lt;html&gt;

	&lt;head&gt;&lt;/head&gt;

	&lt;body&gt;
	&lt;h1&gt;MODIFICAR LOS DATOS DE UNA OFICINA&lt;/h1&gt;
	
	&lt;?php
	
	if (isset($_GET['codOfi'])){
		
		// Conectar con la base de datos
	 	include("config3.php");
	      $cnx = mysqli_connect($SERVIDOR, $USUARIO, $CLAVE, $DATABASE) or die(mysqli_error($cnx));
	      
// Crear el código de la sentencia SQL
      $consulta = "SELECT * FROM Oficinas WHERE codigoOficina='".$_GET['codOfi']."'"; 
      
      // Ejecutar la consulta
      $resultado = mysqli_query($cnx,$consulta) or die(mysqli_error($cnx));
      
      // Comprobar que devuelve filas
      if (mysqli_num_rows($resultado)&gt;0){  // Existe la oficina
      		$ofi = mysqli_fetch_array($resultado);
      		
      echo "&lt;form action='actualizar3.php' method='POST'&gt;";
      echo "CODIGO: &lt;input type='text' name='codigoOfi'value='".$ofi['CodigoOficina']."' readonly/&gt;&lt;br&gt;";
      echo "CIUDAD: &lt;input type='text' name='ciudadOfi' value='".$ofi['Ciudad']."'/&gt;&lt;br&gt;";
      echo "PAIS: &lt;input type='text' name='paisOfi' value='".$ofi['Pais']."'/&gt;&lt;br&gt;";
      echo "REGION: &lt;input type='text' name='regionOfi' value='".$ofi['Region']."'/&gt;&lt;br&gt;";
      echo "COD POSTAL: &lt;input type='text' name='cpOfi' value='".$ofi['CodigoPostal']."'/&gt;&lt;br&gt;";
      echo "TELEFONO: &lt;input type='text' name='tlfOfi' value='".$ofi['Telefono']."'/&gt;&lt;br&gt;";
      echo "&lt;input type='submit' name='MODIFICAR' value='Actualizar'/&gt;";
      echo "&lt;/form&gt;";
      }
      
      else {
      	echo "ERROR: No existe ninguna oficina con el código especificado";
      }
	
	}
	else {
		echo "ERROR: No se ha especificado ningún código de oficina";
	}
	
	?&gt;

	&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>
    <div class="explanation">
        <strong>Clave:</strong>
        <ul>
            <li>El código de oficina se pone en un input con el atributo <code>readonly</code>. Esto es vital: el usuario puede ver el código pero NO puede modificarlo, ya que es la clave primaria (identificador) y usarla para el <code>WHERE</code> en el siguiente paso.</li>
            <li>El formulario se genera dentro del PHP usando <code>echo</code>.</li>
        </ul>
    </div>

    <h3>Paso 3: Guardar en Base de Datos</h3>
    <div class="file-container">
        <div class="file-header">Archivo: actualizar3.php</div>
        <pre>&lt;html&gt;

	&lt;head&gt;&lt;/head&gt;
	
	&lt;body&gt;
	
     	&lt;?php
	     if (isset($_POST['MODIFICAR'])){	
		
		include ("config3.php");
		$cnx = mysqli_connect($SERVIDOR,$USUARIO,$CLAVE,$DATABASE) or die(mysqli_error($cnx));
		

        $valores = "CodigoOficina='".$_POST['codigoOfi']."',";
        $valores .= "Ciudad='".$_POST['ciudadOfi']."',";
        $valores .= "Pais='".$_POST['paisOfi']."',";
        $valores .= "Region='".$_POST['regionOfi']."',";
        $valores .= "CodigoPostal='".$_POST['cpOfi']."',";
        $valores .= "Telefono='".$_POST['tlfOfi']."'";
        $sql = "UPDATE Oficinas SET $valores WHERE CodigoOficina='".$_POST['codigoOfi']."'";
        //echo $sql;
        
        $res = mysqli_query($cnx,$sql) or die(mysqli_error($cnx));
        echo "Registro Actualizado.&lt;br&gt;";
        mysqli_close($cnx);		
	}
	
	else {
	
		echo "ERROR: tienes que insertar desde el formulario";
	}
	?&gt;
	&lt;/body&gt;	
&lt;/html&gt;</pre>
    </div>

</div>

</body>
</html>
